#!/bin/bash
script_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"
benchmark_name=$(echo $script_dir | rev | cut -d "/" -f 3 | rev)
project_name=$(echo $script_dir | rev | cut -d "/" -f 2 | rev)
bug_id=$(echo $script_dir | rev | cut -d "/" -f 1 | rev)
dir_exp=/experiment/$benchmark_name/$project_name/$bug_id


assert-equal () {
    diff -q <($1) <(echo -ne "$2") > /dev/null
}

case "$1" in
    n1)
        assert-equal "$dir_exp/src/test $script_dir/crashing_tests/crash_1" '6\n'
        ;;
    p1)
        assert-equal "$dir_exp/src/test $script_dir/benign_tests/pass_1" '0\n'
        ;;
esac